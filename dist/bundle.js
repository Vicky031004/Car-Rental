window.onclick=function(e){const t=document.getElementById("dropdown-menu");e.target.matches(".dropdown-btn")||t.classList.contains("hidden")||t.classList.add("hidden")},document.addEventListener("click",(function(e){e.target.matches("#pickupLocation, #dropLocation")||document.querySelectorAll(".suggestion-list").forEach((e=>{e.style.display="none"}))})),console.log("Autocomplete initialized"),document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".sign-in-up-btn"),t=document.getElementById("signModal"),n=document.getElementById("modalTitle"),o=document.getElementById("switchAuth"),i=document.getElementById("nameField"),s=document.getElementById("authForm");let r=!0;e.forEach((e=>{e.addEventListener("click",(()=>{t.classList.remove("hidden")}))})),t.addEventListener("click",(e=>{e.target===t&&t.classList.add("hidden")})),o.addEventListener("click",(e=>{e.preventDefault(),r=!r,r?(n.textContent="Sign Up",o.textContent="Already have an account? Sign In",i.style.display="block"):(n.textContent="Sign In",o.textContent="Don't have an account? Sign Up",i.style.display="none")})),s.addEventListener("submit",(e=>{e.preventDefault(),console.log(r?"Sign Up":"Sign In","submitted"),t.classList.add("hidden")}));const a=document.getElementById("searchBtn"),d=document.getElementById("hourlyBtn"),l=document.getElementById("roundTripBtn");let c="hourly";d.classList.add("bg-gray-900","text-white"),l.classList.add("bg-white","text-gray-900","border-2","border-gray-900"),d.addEventListener("click",(()=>{c="hourly",d.classList.remove("bg-white","text-gray-900","border-2","border-gray-900"),d.classList.add("bg-gray-900","text-white"),l.classList.remove("bg-gray-900","text-white"),l.classList.add("bg-white","text-gray-900","border-2","border-gray-900")})),l.addEventListener("click",(()=>{c="roundTrip",l.classList.remove("bg-white","text-gray-900","border-2","border-gray-900"),l.classList.add("bg-gray-900","text-white"),d.classList.remove("bg-gray-900","text-white"),d.classList.add("bg-white","text-gray-900","border-2","border-gray-900")})),["withDriverBtn","withoutDriverBtn","driverOnlyBtn","goodsBtn"].forEach((e=>{const t=document.getElementById(e);t.classList.add("bg-white","text-gray-900","border-2","border-gray-900"),t.addEventListener("click",(function(){var t;t=e,["withDriverBtn","withoutDriverBtn","driverOnlyBtn","goodsBtn"].forEach((e=>{const n=document.getElementById(e);e===t?(n.classList.remove("bg-white","text-gray-900"),n.classList.add("bg-gray-900","text-white")):(n.classList.remove("bg-gray-900","text-white"),n.classList.add("bg-white","text-gray-900")),n.classList.add("border-2","border-gray-900")}))}))})),a.addEventListener("click",(function(e){if(e.preventDefault(),["pickupLocation","dropLocation","pickupDate","pickupTime","returnDate","returnTime"].every((e=>""!==document.getElementById(e).value.trim()))){const e=document.getElementById("pickupLocation").value,t=document.getElementById("dropLocation").value,n=document.getElementById("pickupDate").value,o=document.getElementById("pickupTime").value,i=document.getElementById("returnDate").value,s=document.getElementById("returnTime").value;let r="";document.getElementById("withDriverBtn").classList.contains("bg-gray-900")?r="withDriver":document.getElementById("withoutDriverBtn").classList.contains("bg-gray-900")?r="withoutDriver":document.getElementById("driverOnlyBtn").classList.contains("bg-gray-900")?r="driverOnly":document.getElementById("goodsBtn").classList.contains("bg-gray-900")&&(r="goods"),localStorage.setItem("searchData",JSON.stringify({pickupLocation:e,dropLocation:t,pickupDate:n,pickupTime:o,returnDate:i,returnTime:s,tripType:c,driverOption:r})),console.log("Stored search data:",JSON.parse(localStorage.getItem("searchData"))),"driverOnly"===r?window.location.href="acting-driver.html":"withDriver"===r||"withoutDriver"===r?window.location.href="Selection-Page.html":"goods"===r?alert("Goods transportation option selected. This feature is not implemented yet."):alert("Please select a driver option")}else alert("Please fill in all fields")})),function(){function e(e,t){let n=t.nextElementSibling;n&&n.classList.contains("suggestion-list")||(n=document.createElement("ul"),n.className="suggestion-list absolute z-10 bg-white border border-gray-300 w-full mt-1 max-h-60 overflow-y-auto",t.parentNode.insertBefore(n,t.nextSibling)),n.innerHTML="",e.length>0?(e.forEach((e=>{const o=document.createElement("li");o.textContent=e,o.className="px-4 py-2 hover:bg-gray-100 cursor-pointer",o.addEventListener("click",(()=>{t.value=e,n.innerHTML=""})),n.appendChild(o)})),n.style.display="block"):n.style.display="none"}[document.getElementById("pickupLocation"),document.getElementById("dropLocation")].forEach((t=>{let n=null;t.addEventListener("input",(function(){clearTimeout(n),n=setTimeout((()=>{const t=this.value;t.length>2?function(t,n){const o="MISSING_ENV_VAR".OPENCAGE_API_KEY;if(!o)return void console.error("API key not found");const i=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(t)}&key=${o}&limit=5`;fetch(i).then((e=>e.json())).then((t=>{t.results&&t.results.length>0?e(t.results.map((e=>e.formatted)),n):(console.warn("No suggestions found or invalid response format"),e([],n))})).catch((t=>{console.error("Error fetching suggestions:",t),e([],n)}))}(t,this):e([],this)}),300)}))})),suggestionList.style.display="block",suggestionList.style.position="absolute",suggestionList.style.zIndex="1000",suggestionList.style.backgroundColor="white",suggestionList.style.border="1px solid gray-900",suggestionList.style.width=inputElement.offsetWidth+"px",suggestionList.style.left=inputElement.offsetLeft+"px",suggestionList.style.top=inputElement.offsetTop+inputElement.offsetHeight+"px"}(),console.log("Search script loaded")}));